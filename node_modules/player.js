// Exports club manager player module

// Dependencies
var cmUtils = require('club_manager_utils');

function Player(){}
var dbName = 'cm_player';

// Add new custom object type
// cos = pencilblue custom object service
// util =  pencilblue utilities
// cb = callback(error, boolean)
Player.install = function(cos, util, cb) {
	// Custom object fields
	var player = {
		name: dbName,
		fields: {
			name: { field_type: 'text' },
			number: { field_type: 'text' },
			profilePicture: { field_type: 'peer_object', object_type: 'media' },
			description: { field_type: 'wysiwyg' }
		}
	};

	return cmUtils.createCustomObjectType(cos, util, dbName, player, cb);
};

// Clear player objects and remove custom object type
// cos = pencilblue custom object service
// util = pencilblue utilities
// cb = callback(error, boolean)
Player.uninstall = function(cos, util, cb) {
	return cmUtils.removeCustomObjectType(cos, util, dbName, cb); 
};

// Query all player objecst from the database.
// cos = pencilblue custom object service
// util = pencilblue utitilities
// cb = callback(error, data)
Player.getPlayers = function(cos, util, cb) {
	var selection = ['name', 'number', 'description', 'profilePicture'];
	return cmUtils.queryCustomObjects(cos, util, dbName, selection, cb);
}

module.exports = Player;
